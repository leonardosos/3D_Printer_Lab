flowchart TB

%% User Interaction Layer
GUI["ðŸ§‘â€ðŸ’» User Interface (GUI)"]

%% HTTP Communication Layer
APIGW["ðŸ›° API Gateway"]
QueueMgr["ðŸ“‹ Priority Queue Manager"]
TempGlobal["ðŸŒ¡ Global Temperature"]
PrinterMon["ðŸ–¨ Printer Monitoring"]

%% MQTT Communication Layer
JobHandler["ðŸ§  Job Handler"]
Planning["ðŸ§­ Robot Managment"]
ST["ðŸ§± ST Printer"]
Anomaly["âš ï¸ Anomaly Detection"]
FanCtrl["ðŸŒ€ Fan Controller"]

%% Device Layer (emoji-enhanced)
Robot["ðŸ¤– ROB Robot"]
Fan["ðŸ’¨ Fan Unit"]
TempSensor["ðŸŒ¡ Room Temp Sensor"]

%% Data Flow 
GUI o--o|HTTP| APIGW
APIGW o--o|HTTP| QueueMgr
APIGW o--o|HTTP| TempGlobal
QueueMgr o--o|HTTP| JobHandler

TempSensor --> TempGlobal
JobHandler <--> Planning

ST --> TempGlobal 
ST --> PrinterMon
JobHandler --> ST

Planning <--> Robot
Robot --> PrinterMon
Robot --> JobHandler 

APIGW o--o|HTTP| PrinterMon

TempGlobal --> FanCtrl
FanCtrl --> Fan

TempSensor --> Anomaly
ST --> Anomaly
Anomaly --> FanCtrl