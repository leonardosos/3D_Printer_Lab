flowchart TB

%% User Interaction Layer
GUI["ðŸ§‘â€ðŸ’» User Interface (GUI)"]

%% HTTP Communication Layer
APIGW["ðŸ›° API Gateway"]
QueueMgr["ðŸ“‹ Priority Queue Manager"]
TempGlobal["ðŸŒ¡ Global Temperature"]
PrinterMon["ðŸ–¨ Printer Monitoring"]

%% MQTT Communication Layer
JobHandler["ðŸ§  Job Handler"]
Planning["ðŸ§­ Robot Managment"]
ST["ðŸ§± ST Printer"]
Anomaly["âš ï¸ Anomaly Detection"]
FanCtrl["ðŸŒ€ Fan Controller"]

%% Device Layer (emoji-enhanced)
Robot["ðŸ¤– ROB Robot"]
Fan["ðŸ’¨ Fan Unit"]
TempSensor["ðŸŒ¡ Room Temp Sensor"]

%% Data Flow 
GUI o--o|HTTP| APIGW
APIGW o--o|HTTP: get, post, delete, put| QueueMgr
APIGW o--o|HTTP: get| TempGlobal
QueueMgr o--o|HTTP: get| JobHandler

JobHandler -->|device/printers| Planning

TempSensor -->|device/room/temperature| TempGlobal

ST -->|device/printer/-ID-/temperature| TempGlobal 
ST -->|device/printer/-ID-/progress| PrinterMon
JobHandler -->|device/printer/-ID-/assignement| PrinterMon
JobHandler <-->|down:-> device/printer/-ID-/assignement
up:-> device/printer/-ID-/progress | ST

Planning <-->|down:-> device/robot/-ID-/coordinates 
up:-> device/robot/-ID-/progress| Robot
Robot -->|device/robot/-ID-/progress| PrinterMon
Robot -->|device/robot/-ID-/progress| JobHandler 

APIGW o--o|HTTP: get| PrinterMon

TempGlobal -->|device/fan/controller/status| FanCtrl
FanCtrl -->|device/fan/-ID-/speed| Fan

TempSensor -->|device/room/temperature| Anomaly
ST -->|device/printer/-ID-/temperature| Anomaly
Anomaly -->|device/fan/controller/emergency| FanCtrl